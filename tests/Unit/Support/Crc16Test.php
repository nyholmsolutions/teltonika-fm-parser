<?php

declare(strict_types=1);

namespace Tests\Unit\Support;

use PHPUnit\Framework\TestCase;
use Uro\TeltonikaFmParser\Support\Crc16;

class Crc16Test extends TestCase
{
    /**
     * @test
     * @dataProvider crcInputProvider
     */
    public function can_calc_crc16($input, $crc)
    {
        $this->assertEquals($crc, (new Crc16)->calculate(hex2bin($input)));
    }

    public static function crcInputProvider()
    {
        return [
            [
                '08020000016b1e03ccf001014b2e1818b0992d00880000080000f00906f0015000150445010100b30003180000430fce44000000000000016b1e1228b801014b31ad18b09bc800000000000000f00906f0015000150445020100b30003180000430fcf440000000002',
                0x00006513,
            ],
            [
                '8e040000016b2e22974f0000000000000000000000000000000000000017000a00160100470100f00000150400c80000ef0100cc8000d38000d58000d780000d004300000044000000b5000000b600000042411b0018000000480bb800490bb8004a0bb8004b0bb800060bb800080bb800e0ffd80000000000000000016b2e21acef0000000000000000000000000000000000000017000a00160100470100f00000150400c80000ef0100cc8000d38000d58000d780000d004300000044000000b5000000b600000042411c0018000000480bb800490bb8004a0bb8004b0bb800060bb800080bb800e0ffd80000000000000000016b2e20c2930000000000000000000000000000000000000017000a00160100470100f00000150400c80000ef0100cc8000d38000d58000d780000d004300000044000000b5000000b60000004241910018000000480bb800490bb8004a0bb8004b0bb800060bb800080bb800e0ffd80000000000000000016b2e1fd8330000000000000000000000000000000000000017000a00160100470100f00000150400c80000ef0100cc8000d38000d58000d780000d004300000044000000b5000000b60000004241db0018000000480bb800490bb8004a0bb8004b0bb800060bb800080bb800e0ffd800000000000004',
                0x0000abb5,
            ],
            [
                '8e0000',
                0x00002b60,
            ],
            [
                '080000',
                0x0000c281,
            ],
        ];
    }
}
